<!DOCTYPE HTML>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://kit.fontawesome.com/14c95c3413.js" crossorigin="anonymous"></script>
</head>

<body>
	<div id="imageslider" class="transparency">
		<ul>
			<li aspectindex="0"><img src="" /></li>
			<li aspectindex="1"><img src="" /></li>
			<li aspectindex="2"><img src="" /></li>
			<li aspectindex="3"><img src="" /></li>

		</ul>
	</div>
	<div><input id="seekAudioTime" type="range" min="0" value="" onchange="seekAudioTime()"
			ontouchmove="seekAudioTime()">
	</div>
	<div id="playAudioTime"></div>

	<div class="audiobag">
		<div class="nextprevWidth">
			<div id="prevcss"><button id="prevBtn"><i class="fas fa-backward"></i></button></div>
			<div id="transparency"><button id="playBtn"><img src="images/audio/play1.png"></button></div>
			<div id="nextcss"><button id="nextBtn"><i class="fas fa-forward"></i></button></div>
		</div>

		<audio id="audiovisual" src="" type="audio/mpeg">
		</audio>

		<div>
			<a id="volumeBtn"><img src="images/audio/volume.png"></a>
			<input id="volumerange" ontouchmove="volumeUpDownHandler()" type="range" value="25" min="0" max="100">
			<a id="loopBtn" data-control="auto"><img src="images/audio/loop.png"></a>
		</div>
	</div>
	<div id="songlist">歌曲列表</div>

	<div class="songcolumnbag">
		<span>1</span><a class="changemuisc" songcolumnindex="1" data-src='audiovisual/うっせぇわ.mp4'
			data-photo="images/music/うっせぇわ.jpg" onclick="Achangemuisc(this)">
			<img src="images/audio/play1.png" onclick="Achangeing(this)"></a>
		<img id="songcolumnimg" src="images/music/うっせぇわ.jpg">
		<div class="playAudioTime">うっせぇわ</div>
	</div>

	<div class="songcolumnbag">
		<span>2</span><a class="changemuisc" songcolumnindex="2" data-src="audiovisual/三原色.mp4"
			data-photo="images/music/三原色.jpg" onclick="Achangemuisc(this)">
			<img src="images/audio/play1.png" onclick="Achangeing(this)"></a>
		<img id="songcolumnimg" src="images/music/三原色.jpg">
		<div class="playAudioTime">三原色</div>
	</div>

	<div class="songcolumnbag">
		<span>3</span><a class="changemuisc" songcolumnindex="3" data-src='audiovisual/怪物.mp4'
			data-photo="images/music/Monster.jpg" onclick="Achangemuisc(this)">
			<img src="images/audio/play1.png" onclick="Achangeing(this)"></a>
		<img id="songcolumnimg" src="images/music/Monster.jpg">
		<div class="playAudioTime">Monster</div>
	</div>

	<div class="songcolumnbag">
		<span>4</span><a class="changemuisc" songcolumnindex="4" data-src="audiovisual/神っぽいな.mp4"
			data-photo="images/music/神っぽいな.jpg" onclick="Achangemuisc(this)">
			<img src="images/audio/play1.png" onclick="Achangeing(this)"></a>
		<img id="songcolumnimg" src="images/music/神っぽいな.jpg">
		<div class="playAudioTime">神っぽいな</div>
	</div>
	<div class="songcolumnbag">
		<span>5</span><a class="changemuisc" songcolumnindex="5" data-src="audiovisual/踊.mp4"
			data-photo="images/music/踊.jpg" onclick="Achangemuisc(this)">
			<img src="images/audio/play1.png" onclick="Achangeing(this)"></a>
		<img id="songcolumnimg" src="images/music/踊.jpg">
		<div class="playAudioTime">踊</div>
	</div>
	<div class="songcolumnbag">
		<span>6</span><a class="changemuisc" songcolumnindex="6" data-src="audiovisual/天使のagape.mp4"
			data-photo="images/music/天使のagape.jpg" onclick="Achangemuisc(this)">
			<img src="images/audio/play1.png" onclick="Achangeing(this)"></a>
		<img id="songcolumnimg" src="images/music/天使のagape.jpg">
		<div class="playAudioTime">天使のagape</div>
	</div>
	<style>
		body {
			margin: 0;
			padding: 0;
			border: 0;
			background: no-repeat linear-gradient(27deg, #959292 30%, #676666 70%);
			min-height: 100vh;
		}

		#imageslider {
			display: flex;
			justify-content: center;
			-moz-perspective: 1000px;
			perspective: 1000;
			-moz-perspective-origin: 50% 100px;
			perspective-origin: 50% 100px;
			margin: 0;
			padding: 5em 0 0 0;
			width: 100%;
			height: 20em;
		}

		#imageslider ul {
			list-style-type: none;
			padding: 0;
			position: relative;
			margin: 0 auto;
			height: 281px;
			width: 450px;
			-moz-transform-style: preserve-3d;
			transform-style: preserve-3d;
			-moz-transform-origin: 50% 100px 0;
			transform-origin: 50% 100px 0;
			-moz-transition: all 1.0s ease-in-out;
			transition: all 1.0s ease-in-out;
		}

		#imageslider ul li {
			position: absolute;
			height: 281px;
			width: 450px;
			padding: 0px;
		}

		#imageslider ul li img {
			height: 20em;
			width: 28em;
		}

		/*第一張角度*/
		#imageslider ul li:nth-child(1) {
			-moz-transform: translateZ(225px);
			transform: translateZ(225px);
		}

		/*第二張角度*/
		#imageslider ul li:nth-child(2) {
			-moz-transform: rotateY(90deg) translateZ(225px);
			transform: rotateY(90deg) translateZ(225px);
		}

		/*第三張角度*/
		#imageslider ul li:nth-child(3) {
			-moz-transform: rotateY(180deg) translateZ(225px);
			transform: rotateY(180deg) translateZ(225px);
		}

		/*第四張角度*/
		#imageslider ul li:nth-child(4) {
			-moz-transform: rotateY(-90deg) translateZ(225px);
			transform: rotateY(-90deg) translateZ(225px);
		}

		#imageslider.transparency img {
			opacity: 0.7;
		}

		#imageslider+div {
			display: flex;
			justify-content: center;
			margin: 0.5em 0em;
		}

		#imageslider+div input[type="range"] {
			width: 20em;
		}

		/* input range 主體 */
		#seekAudioTime {
			-webkit-appearance: none;
			cursor: pointer;
			height: 1em;
		}

		/* 滑動鈕 */
		#seekAudioTime::-webkit-slider-thumb {
			-webkit-appearance: none;
			border: 1px solid #757575;
			height: 1.5em;
			width: 1em;
			border-radius: 0px;
			background: #9e9e9e;
			cursor: pointer;
			margin-top: -0.25em;
			box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
		}

		/* 滑動軌道*/
		#seekAudioTime::-webkit-slider-runnable-track {
			height: 1em;
			background: no-repeat linear-gradient(27deg, #2c2c2c 30%, #2c2c2c 70%);
		}

		#seekAudioTime:focus {
			outline: none;
		}

		/*時間顯示*/
		#playAudioTime {
			text-align: center;
			font-size: 2em;
			margin: 0.2em 0 0.5em 0;
			height: 37px;
		}

		/*音樂按鈕*/
		.audiobag {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: space-evenly;
			position: relative;
		}

		.audiobag>:nth-child(3) {
			margin: 0.5em 0;
		}

		.nextprevWidth {
			display: flex;
			justify-content: center;
			align-items: center;
			width: 100%;
			max-width: 25em;
		}

		#prevcss>button,
		#nextcss>button {
			font-size: 2.5em;
			box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px,
				rgba(0, 0, 0, 0.3) 0px 30px 60px -30px,
				rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
		}

		#prevcss>button {
			margin-right: 0.5em;
			background: no-repeat linear-gradient(45deg, #858484 30%, #424242 70%);
			border-radius: 0.5em 0 0 0.5em;
		}

		#nextcss>button {
			margin-left: 0.5em;
			background: no-repeat linear-gradient(-45deg, #858484 30%, #424242 70%);
			border-radius: 0 0.5em 0.5em 0;
		}

		#transparency {
			display: flex;
			justify-content: center;
			margin: 0;
		}

		#playBtn {
			display: flex;
			justify-content: center;
			align-items: center;
			width: 4em;
			height: 4em;
			/*border:2px solid #0e0d0d;*/
			border-radius: 100%;
			background: no-repeat linear-gradient(90deg, #858484 30%, #424242 70%);
			box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px,
				rgba(87, 84, 84, 0.3) 0px 30px 60px -30px,
				rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
		}

		#playBtn img {
			width: 2.5em;
		}

		/*音樂按鈕 END*/

		/*歌曲列表*/
		#songlist {
			margin-top: 1em;
			display: flex;
			flex-direction: column;
			align-items: center;
		}

		.songcolumnbag {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.songcolumnbag>:nth-child(1n+1):not(:nth-last-child(1)) {
			margin-right: 0.1em;
		}

		.songcolumnbag>:nth-child(1n+1):not(:nth-last-child(1)) {
			margin-right: 0.2em;
		}

		.songcolumnbag .playAudioTime {
			display: flex;
			margin: 1em 0;
			justify-content: space-evenly;
			min-width: 12.5em;
			color: white;
			background: rgba(0, 0, 0, 0.5);
			white-space: nowrap;
			overflow: hidden;
		}

		#volumerange {
			height: 25px;
			width: 4em;
			margin: 0 0.2em;
		}

		#loopBtn,
		#volumeBtn {
			cursor: pointer;
		}

		#songcolumnimg {
			width: 2em;
		}

		/*歌曲列表 END*/

		@media (max-width: 600px) {
			#imageslider {
				height: 15em;
			}

			#imageslider ul li {
				height: 210.025px;
				width: 337.5px;
			}

			#imageslider ul {
				height: 210.025px;
				width: 337.5px;
			}

			#imageslider ul li img {
				height: 15em;
				width: 21em;
			}

			/*第一張角度*/
			#imageslider ul li:nth-child(1) {
				-moz-transform: translateZ(168.75px);
				transform: translateZ(168.75px);
			}

			/*第二張角度*/
			#imageslider ul li:nth-child(2) {
				-moz-transform: rotateY(90deg) translateZ(168.75px);
				transform: rotateY(90deg) translateZ(168.75px);
			}

			/*第三張角度*/
			#imageslider ul li:nth-child(3) {
				-moz-transform: rotateY(180deg) translateZ(168.75px);
				transform: rotateY(180deg) translateZ(168.75px);
			}

			/*第四張角度*/
			#imageslider ul li:nth-child(4) {
				-moz-transform: rotateY(-90deg) translateZ(168.75px);
				transform: rotateY(-90deg) translateZ(168.75px);
			}

			#playAudioTime {
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: 1.5em;
			}
		}
	</style>

	<script>

		$(document).ready(init);

		var songdata =
			[{
				id: '',
				productId: '',
				name: '',
				src: '',
				photo: ''
			},
			{
				id: '1',
				productId: '1',
				name: 'うっせぇわ',
				src: 'audiovisual/うっせぇわ.mp4',
				photo: 'images/music/うっせぇわ.jpg'
			},
			{
				id: '2',
				productId: '2',
				name: '三原色',
				src: 'audiovisual/三原色.mp4',
				photo: 'images/music/三原色.jpg'
			},
			{
				id: '3',
				productId: '3',
				name: 'Monster',
				src: 'audiovisual/怪物.mp4',
				photo: 'images/music/Monster.jpg'
			},
			{
				id: '4',
				productId: '4',
				name: '神っぽいな',
				src: 'audiovisual/神っぽいな.mp4',
				photo: 'images/music/神っぽいな.jpg'
			},
			{
				id: '5',
				productId: '5',
				name: '踊',
				src: 'audiovisual/踊.mp4',
				photo: 'images/music/踊.jpg'
			},
			{
				id: '6',
				productId: '6',
				name: '天使のagape',
				src: 'audiovisual/天使のagape.mp4',
				photo: 'images/music/天使のagape.jpg'
			},
			/*{
				id: '7',
				productId: '7',
				name: 'マイネームイズエリート☆',
				src: 'audiovisual/マイネームイズエリート☆.mp4',
				photo: 'images/music/マイネームイズエリート☆.jpg'
			},
			{
				id: '8',
				productId: '8',
				name: 'みっころね×しょうたいむ!!',
				src: 'audiovisual/みっころね×しょうたいむ.mp4',
				photo: 'images/music/みっころね×しょうたいむ!!.jpg'
			},
			{
				id: '9',
				productId: '9',
				name: '天球彗星は夜を跨いで',
				src: 'audiovisual/天球彗星は夜を跨いで.mp4',
				photo: 'images/music/天球彗星は夜を跨いで.jpg'
			},
			{
				id: '10',
				productId: '12',
				name: 'Anarchy',
				src: 'audiovisual/Anarchy.mp4',
				photo: 'images/music/Anarchy.jpg'
			},
			{
				id: '11',
				productId: '13',
				name: '千本桜',
				src: 'audiovisual/千本桜Ado.mp4',
				photo: 'images/music/千本桜Ado.jpg'
			},*/
			{
				id: '',
				productId: '',
				name: '',
				src: '',
				photo: ''
			},
			{
				id: '',
				productId: '',
				name: '',
				src: '',
				photo: ''
			}
			];

		var rotateY = 0;
		var thismusic = 1;
		var index = Number($("#imageslider ul li").attr("aspectIndex"));//get index number
		var songcolumnindex = 1;
		var audiovisual = $("#audiovisual")[0];

		function seekAudioTime() {
			//lert($("#seekAudioTime").val());
			//seekAudioTime的值=音樂播放的時間
			audiovisual.currentTime = $("#seekAudioTime").val();
		}


		function prevBtnHandler() {
			//alert("上一首");
			//向左轉90度
			rotateY -= -90;
			//上一首音樂
			thismusic--;
			//第一首時上一首按鈕關閉
			if (thismusic == 1) {
				$("#prevBtn").off("click", prevBtnHandler);
				$("#prevBtn").css("opacity", "0.2");
			}
			//下一首按鈕關閉時變開啟
			if ($("#nextBtn").css("opacity") == 0.2) {
				$("#nextBtn").on("click", nextBtnHandler);
				$("#nextBtn").css("opacity", "1");
			}
			//操控第幾面
			if (index > 0) {
				index--;
			} else {
				index = 3;
			}
			//換成上一首歌路徑
			$('#audiovisual').attr("src", songdata[thismusic].src);
			//按上一首自動撥放
			if (audiovisual.paused) {
				PlayPauseHandler();
			}
			audiovisual.autoplay;
			//所有changemuisc播放按鈕圖變三角形
			$(".changemuisc img").attr("src", "images/audio/play1.png");
			//立體方塊圖片轉換
			if (index == 0) {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic + 1].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic + 2].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic - 1].photo);
			} else if (index == 1) {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic - 1].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic + 1].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic + 2].photo);
			}
			else if (index == 2) {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic + 2].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic - 1].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic + 1].photo);
			} else {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic + 1].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic + 2].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic - 1].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic].photo);
			}
			//立體方塊轉角度
			$("#imageslider ul").css({
				"transform": "rotateY(" + rotateY + "deg)"
			});
			//按上一首透明度關閉
			$("#imageslider").toggleClass("transparency", false);
		}

		function nextBtnHandler() {
			//alert("下一首");
			//向右轉90度
			rotateY -= 90;
			//下一首音樂
			thismusic++;
			//最後一首時下一首按鈕關閉
			if (thismusic == (songdata.length - 3)) {
				$("#nextBtn").off("click", nextBtnHandler);
				$("#nextBtn").css("opacity", "0.2");
			}
			//上一首按鈕關閉時變開啟
			if ($("#prevBtn").css("opacity") == 0.2) {
				$("#prevBtn").on("click", prevBtnHandler);
				$("#prevBtn").css("opacity", "1");
			}
			//操控第幾面
			if (index < 3) {
				index++;
			} else {
				index = 0;
			}
			//換成下一首歌路徑
			$('#audiovisual').attr("src", songdata[thismusic].src);
			//按下一首自動撥放
			if (audiovisual.paused) {
				PlayPauseHandler();
			}
			audiovisual.autoplay;
			//所有changemuisc播放按鈕圖變三角形
			$(".changemuisc img").attr("src", "images/audio/play1.png");
			//立體方塊圖片轉換
			if (index == 0) {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic + 1].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic + 2].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic - 1].photo);
			} else if (index == 1) {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic - 1].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic + 1].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic + 2].photo);
			} else if (index == 2) {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic + 2].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic - 1].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic + 1].photo);
			} else {
				$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic + 1].photo);
				$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic + 2].photo);
				$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic - 1].photo);
				$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic].photo);
			}
			//立體方塊轉角度
			$("#imageslider ul").css({
				"transform": "rotateY(" + rotateY + "deg)"
			});
			//按下一首透明度關閉
			$("#imageslider").toggleClass("transparency", false);
		}

		function Achangemuisc(themusic) {
			//alert($(themusic).attr('songcolumnindex'));
			//指定為第songcolumnindex首歌
			thismusic = $(themusic).attr('songcolumnindex');
			//角度=這首歌乘-90度
			rotateY = thismusic * -90;
			//算立體方塊的值
			if ((rotateY / 90) % 4 == 0) {
				index = 0;
			} else if ((rotateY / 90) % 4 == -1) {
				index = 1;
			} else if ((rotateY / 90) % 4 == -2) {
				index = 2;
			} else {
				if ((rotateY / 90) % 4 == -3) {
					index = 3;
				}
			}
			//上下一首按鈕關閉時變開啟
			if ($("#prevBtn").css("opacity") == 0.2) {
				$("#prevBtn").on("click", prevBtnHandler);
				$("#prevBtn").css("opacity", "1");
			} else {
				if ($("#nextBtn").css("opacity") == 0.2) {
					$("#nextBtn").on("click", nextBtnHandler);
					$("#nextBtn").css("opacity", "1");
				}
			}

			//$("#imageslider ul").css({
			//	"transform": "rotateY(" + rotateY + "deg)"
			//});

			//第一首或最後一首時按鈕關閉
			if (thismusic == 1) {
				$("#prevBtn").off("click", prevBtnHandler);
				$("#prevBtn").css("opacity", "0.2");
			} else {
				if (thismusic == (songdata.length - 3)) {
					$("#nextBtn").off("click", nextBtnHandler);
					$("#nextBtn").css("opacity", "0.2");
				}
			}
			//播放按鈕圖變||
			$("#playBtn img").attr("src", "images/audio/play1.png");
			//換成這首圖片
			$("#imageslider ul li").children().attr("src", $(themusic).attr('data-photo'));
			//換成這首音樂路徑
			$('#audiovisual').attr("src", $(themusic).attr('data-src'));
			//按這首透明度關閉
			$("#imageslider").toggleClass("transparency", false);
			//播放音樂
			PlayPauseHandler();
		}

		function Achangeing(theimg) {
			//其他changemuisc播放按鈕圖變三角形
			$(".changemuisc img").attr("src", "images/audio/play1.png");
			//changemuisc播放按鈕圖變||
			$(theimg).attr("src", "images/audio/pause.png");
		}

		$("#transparency").click(function () {
			$("#imageslider").toggleClass("transparency");
		});

		function init() {
			//上一首按鈕初始狀態為關閉
			if (rotateY == 0) {
				$("#prevBtn").off("click", prevBtnHandler);
				$("#prevBtn").css("opacity", "0.2");
			}
			//$("#prevBtn").click(prevBtnHandler);
			//下一首按鈕開關
			$("#nextBtn").click(nextBtnHandler);
			//audiovisual初值為第一首
			$('#audiovisual').attr("src", songdata[1].src);
			//playAudioTime初值為第一首歌名
			$("#playAudioTime").text(songdata[1].name);
			//imageslider ul li 第一面初值第一首歌圖
			$("#imageslider ul li").children().eq(0).attr("src", songdata[thismusic].photo);
			//imageslider ul li 第二面初值第二首歌圖
			$("#imageslider ul li").children().eq(1).attr("src", songdata[thismusic + 1].photo);
			//imageslider ul li 第三面初值第三首歌圖
			$("#imageslider ul li").children().eq(2).attr("src", songdata[thismusic + 2].photo);
			//imageslider ul li 第四面初值第四首歌圖
			$("#imageslider ul li").children().eq(3).attr("src", songdata[thismusic + 3].photo);
			//循環播放開關
			$("#loopBtn").click(LoopHandler);
			//設定seekAudioTime初值
			$("#seekAudioTime").val(0);
			//設定音量滑條初值
			$('#audiovisual').prop("volume", ($("#volumerange").val() / 100));
			//撥放按鈕開關
			$("#playBtn").click(PlayPauseHandler);
			//音量滑條操控
			$("#volumerange").click(volumeUpDownHandler);
			//靜音按鈕
			$("#volumeBtn").click(volumeMuted);
			// $("#audiovisual").on("timeupdate", timeUpdate);
			//播放時啟動方法
			$("#audiovisual").on("play", startPlayHandler);
			//暫停時啟動方法
			$("#audiovisual").on("pause", stopPlayHandler);
			//結束時啟動方法
			$("#audiovisual").on("ended", endedPlay);

		}

		function PlayPauseHandler() {
			if (audiovisual.paused) {
				//alert("播放");
				//audiovisual.currentTime = 0;
				//音樂播放
				audiovisual.play();
				//播放按鈕圖變||
				$("#playBtn img").attr("src", "images/audio/pause.png");
				//播放時啟用timeUpdate方法
				$("#audiovisual").on("timeupdate", timeUpdate);
			} else {
				//alert("暫停");
				//暫停時播放按鈕圖變三角形
				$("#playBtn img").attr("src", "images/audio/play1.png");
				//暫停時changemuisc播放按鈕圖變三角形
				$(".changemuisc img").attr("src", "images/audio/play1.png");
				//音樂暫停
				audiovisual.pause();
			}
		}

		function LoopHandler() {
			//切換循環開關
			if ($("#loopBtn").attr("data-control") == "auto") {
				$("#loopBtn img").attr("src", "images/audio/loop1.png");
				$("#loopBtn").attr("data-control", "loop");
				audiovisual.loop = true;
			} else {
				audiovisual.loop = false;
				$("#loopBtn img").attr("src", "images/audio/loop.png");
				$("#loopBtn").attr("data-control", "auto");
			}
		}

		function volumeMuted() {
			//alert("靜音");
			//點擊靜音
			audiovisual.muted = true;
			//聲音滑條值變0
			$("#volumerange").val(0);
			//換成靜音圖
			$("#volumeBtn img").attr("src", "images/audio/muted.png");
		}

		function startPlayHandler() {
			//alert("歌名");
			//播放按鈕圖變||
			$("#playBtn img").attr("src", "images/audio/pause.png");
			//播放時playAudioTime換成這首歌名
			$("#playAudioTime").text(songdata[thismusic].name);
		}

		function stopPlayHandler() {
			//暫停時playAudioTime換成這首歌名
			$("#playAudioTime").text(songdata[thismusic].name);
		}

		function endedPlay() {
			//結束時playAudioTime換成這首歌名
			$("#playAudioTime").text(songdata[thismusic].name);
			//結束時播放按鈕圖變三角形
			$("#playBtn img").attr("src", "images/audio/play1.png");
			//結束時changemuisc播放按鈕圖變三角形
			$(".changemuisc img").attr("src", "images/audio/play1.png");
			//不是最後一首結束後播放下一首
			if (thismusic != (songdata.length) - 3) {
				if (audiovisual.ended) {
					nextBtnHandler();
				}
			}
		}

		function timeUpdate() {
			//滑條=Time屬性的值
			$("#seekAudioTime").val($("#seekAudioTime").attr("Time"));
			//Time屬性的值=音樂時間
			$("#seekAudioTime").attr("Time", audiovisual.currentTime);
			//滑條最大值=總音樂時間
			$("#seekAudioTime").attr("max", audiovisual.duration);
			//顯示時間
			$("#playAudioTime").text(timeConvert(audiovisual.currentTime)
				+ " / " + timeConvert(audiovisual.duration));
		}

		function timeConvert(time) {
			//時間分數
			var mins = parseInt(time / 60);
			//時間秒數
			var secs = parseInt(time % 60);
			//時間秒數轉換成00:00
			if (secs < 10) secs = "0" + secs;
			return mins + ":" + secs;
		}

		function volumeUpDownHandler() {
			//alert($("#volumerange").val());
			//取音量滑條值
			var volumesound = $("#volumerange").val();
			//提示顯示為音量滑條值
			var title = $('#volumerange').attr('title', volumesound);
			//音量設定
			if (volumesound != 0) {
				$("#volumeBtn img").attr("src", "images/audio/volume.png");
				audiovisual.muted = false;
				volumesound /= 100;
			} else {
				$("#volumeBtn img").attr("src", "images/audio/muted.png");
			}
			//音樂=音量滑條值
			audiovisual.volume = volumesound;
		}

	</script>
</body>

</html>